pipeline {
    agent any
    stages {
        stage('GITHUB') {
            steps {
                git url: 'https://github.com/yossiazu/t1.git', branch: 'main'
                sh 'pwd'
                sh 'ls -la'
            }
        }
        stage('look fo the file') {
            steps{
                 
                sh'''
                if [ $file = "all" ]; then
                  cp all index.html
                elif [ $file = "java" ]; then
                   cp java index.html
                elif [ $file = "python" ]; then
                   cp python index.html
                elif [ $file = "c" ]; then
                   cp c index.html
                fi
                docker build -t my-apache2 .
                docker run -dit --name $con_name -p 9889:80 my-apache2
                '''
                
            }
        }
    }
    post {
        success {
            mail to: "yossi1999azu@gmail.com",
                 subject: "the build was successful",
                 body: "the selected language is: $file"
        }
    }
}
